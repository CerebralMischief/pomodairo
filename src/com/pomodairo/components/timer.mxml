<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="114" 
	height="92"  
	backgroundAlpha="0.0"
	initialize="init()">
	
	    <mx:Script>
        <![CDATA[
        	import flash.utils.getTimer;
            import flash.utils.Timer;
            import flash.events.TimerEvent;
		    import flash.display.Sprite;
		    import flash.media.Sound;
		    import flash.media.SoundChannel;
		    
        	[Embed(source="alarm.mp3")]
        	public var alarmClass:Class;		                

            private const MIN_MASK:String = "00";
            private const SEC_MASK:String = "00";
            private const TIMER_INTERVAL:int = 10;

            private var baseTimer:int;
            private var t:Timer;

            private function init():void {
                t = new Timer(TIMER_INTERVAL);
                t.addEventListener(TimerEvent.TIMER, updateTimer);            	
            }

            private function updateTimer(evt:TimerEvent):void {
            	if (getTimer() >= baseTimer) {
            		counter.text = "TIMEOUT!!!!";
            		var alarm:Sound = new alarmClass() as Sound;
            		alarm.play();
            		t.stop();
            	} else {
	                var d:Date = new Date(baseTimer - getTimer());
	                var min:String = (MIN_MASK + d.minutes).substr(-MIN_MASK.length);
	                var sec:String = (SEC_MASK + d.seconds).substr(-SEC_MASK.length);
	                counter.text = String(min + ":" + sec);
	            }
            }

            private function startTimer():void {
                baseTimer = getTimer();
                baseTimer += 25*60*1000+1000;
                //baseTimer += 6*1000;
                t.start();
                button.label = "Stop";
            }

            private function stopTimer():void {
                t.stop();
            }
        ]]>
    </mx:Script>
    
	<mx:Button id="button" label="Start timer" click="startTimer()"/>
	<mx:Label id="counter" fontSize="20"  text="25:00" color="#FFFFFF" x="20" y="36"/>
    
</mx:Canvas>
