<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="absolute" height="166" width="320" showFlexChrome="false"
	verticalScrollPolicy="off" horizontalScrollPolicy="off"
	creationComplete="init()" xmlns:views="com.views.*" xmlns:ns1="com.pomodairo.components.*"
	backgroundColor="#292929">
	
	<mx:Style source="style/style.css"/>
	
    <mx:Script>
        <![CDATA[
        	import com.pomodairo.components.timer;
        	import com.pomodairo.Pomodoro;
        	import com.pomodairo.components.PomoItemInput;
        	import mx.controls.TextInput;
        
            private function toggleTaskList():void {
            	if (!taskListPanel.visible) {
            		this.height = this.height+taskListPanel.height;
            	} else {
            		this.height = 166;
            		
            	}
				taskListPanel.visible = !taskListPanel.visible;	
            }

            private function newInterruption():void {
            	trace("Add interruption");
            	var input:PomoItemInput = new PomoItemInput();
            	input.type = Pomodoro.TYPE_INTERRUPTION;
            	input.reference = timerCanvas.pomodoro;
            	input.x = 40;
            	input.y = 80;
            	this.addChild(input);
            }
        ]]>
    </mx:Script>

	<mx:Fade id="fadein" />
	<mx:Fade id="fadeout" />

	
	<mx:Panel title="Pomodairo" x="0" y="0" height="164" width="320" layout="absolute" mouseDown="{nativeWindow.startMove()}">				
		<ns1:timer id="timerCanvas" x="0" y="0">
		</ns1:timer>
		<mx:ControlBar id="controls" height="45" y="88">
			<mx:Image source="assets/appicons/note_edit.png" click="toggleTaskList()"  toolTip="View task list"/>
			<mx:Image source="assets/appicons/note_add.png" x="140"  toolTip="Add unplanned"/>
			<mx:Image id="interruptionButton" source="assets/appicons/warning.png" click="newInterruption()" x="50" toolTip="Add interruption"/>
		</mx:ControlBar>
	</mx:Panel>
	
	<mx:Label text="x" click="close()" color="#FFFFFF" x="300" y="10"/>
	<mx:Label text="_" click="minimize()" color="#FFFFFF" x="280" y="10"/>
	
	<mx:Canvas id="taskListPanel" x="0" y="166" height="300" width="320" visible="false" showEffect="fadein" hideEffect="fadeout">				
		<ns1:TaskListCanvas x="0" y="0" height="100%" width="100%">
		</ns1:TaskListCanvas>
	</mx:Canvas>
</mx:WindowedApplication>
